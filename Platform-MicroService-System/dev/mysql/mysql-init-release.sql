USE XWAY;

CREATE OR REPLACE VIEW XV_USER AS
	SELECT I.*, XT_LOGIN.LOGINNAME, XT_LOGIN.`LOCK` FROM (
	  SELECT H.*,XT_TIMEZONE.NAME TIMEZONENAME, XT_TIMEZONE.GMT FROM (
	    SELECT G.*,XT_LOCALE.NAME LOCALENAME, XT_LOCALE.LANGUAGE, XT_LOCALE.COUNTRY FROM (
	      SELECT F.*, XT_CONTINENT.NAME CONTINENTNAME, XT_CONTINENT.CODE FROM (
	        SELECT E.*, XT_COUNTRY.CONTINENTID, XT_COUNTRY.NAME COUNTRYNAME, XT_COUNTRY.ISO_CODE_2, XT_COUNTRY.ISO_CODE_3, XT_COUNTRY.PHONE_CODE, XT_COUNTRY.CURRENCY FROM (
	          SELECT D.*, XT_ROLE.NAME ROLENAME, XT_ROLE.DESCRIPTION ROLEDESCRIPTION FROM (
              SELECT A.*, DATEFORMAT,TIMEFORMAT,DATETIMEFORMAT,PAGESIZE,STYLE FROM ( 
                SELECT XT_USER.USERID,XT_USER.TYPE, XT_USER.NAME, XT_USER.NICKNAME, XT_USER.GENDER, XT_USER.ROLEID, XT_USER.BIRTHDAY, XT_USER.MOBILE, XT_USER.TEL, XT_USER.EMAIL, XT_USER.ADDRESS, XT_USER.ZIPCODE, XT_USER.HOMEPAGE, XT_USER.PHOTO, XT_USER.COUNTRYID, XT_USER.LOCALEID, XT_USER.TIMEZONEID, XT_USER.CUSTOMIZEID, XT_USER.ABOUTME, XT_USER.BDELETE FROM XT_USER
              ) A INNER JOIN XT_CUSTOMIZE ON A.CUSTOMIZEID=XT_CUSTOMIZE.CUSTOMIZEID
	          ) D INNER JOIN XT_ROLE ON D.ROLEID=XT_ROLE.ROLEID
	        ) E LEFT JOIN XT_COUNTRY ON E.COUNTRYID=XT_COUNTRY.COUNTRYID
	      ) F LEFT JOIN XT_CONTINENT ON F.CONTINENTID=XT_CONTINENT.CONTINENTID
	    ) G LEFT JOIN XT_LOCALE ON G.LOCALEID=XT_LOCALE.LOCALEID
	  ) H LEFT JOIN XT_TIMEZONE ON H.TIMEZONEID=XT_TIMEZONE.TIMEZONEID
	) I LEFT JOIN XT_LOGIN ON I.USERID=XT_LOGIN.LOGINID;


CREATE OR REPLACE VIEW XV_EMPLOYEE AS
	SELECT I.*, XT_LOGIN.LOGINNAME, XT_LOGIN.`LOCK` FROM (
	  SELECT H.*,XT_TIMEZONE.NAME TIMEZONENAME, XT_TIMEZONE.GMT FROM (
	    SELECT G.*,XT_LOCALE.NAME LOCALENAME, XT_LOCALE.LANGUAGE, XT_LOCALE.COUNTRY FROM (
	      SELECT F.*, XT_CONTINENT.NAME CONTINENTNAME, XT_CONTINENT.CODE FROM (
	        SELECT E.*, XT_COUNTRY.CONTINENTID, XT_COUNTRY.NAME COUNTRYNAME, XT_COUNTRY.ISO_CODE_2, XT_COUNTRY.ISO_CODE_3, XT_COUNTRY.PHONE_CODE, XT_COUNTRY.CURRENCY FROM (
	          SELECT D.*, XT_ROLE.NAME ROLENAME, XT_ROLE.DESCRIPTION ROLEDESCRIPTION FROM (
	            SELECT C.*, XT_ORG.NAME ORGNAME, XT_ORG.ADDRESS ORGADDRESS, XT_ORG.TEL ORGTEL, XT_ORG.DESCRIPTION ORGDESCRIPTION, XT_ORG.BDELETE ORGBDELETE FROM (
	              SELECT B.*, ORGID, XT_DEPARTMENT.NAME DEPARTMENTNAME, XT_DEPARTMENT.DESCRIPTION DEPARTMENTDESCRIPTION, XT_DEPARTMENT.PARENTID, XT_DEPARTMENT.TEL DEPARTMENTTEL, XT_DEPARTMENT.BDELETE DEPARTMENTBDELETE FROM (
	                SELECT A.*, DATEFORMAT,TIMEFORMAT,DATETIMEFORMAT,PAGESIZE,STYLE FROM ( 
	                  SELECT XT_USER.USERID, XT_USER.TYPE, XT_USER.NAME, XT_USER.NICKNAME, XT_USER.GENDER, XT_USER.ROLEID, XT_USER.BIRTHDAY, XT_USER.MOBILE, XT_USER.TEL, XT_USER.EMAIL, XT_USER.ADDRESS, XT_USER.ZIPCODE, XT_USER.HOMEPAGE, XT_USER.PHOTO, XT_USER.COUNTRYID, XT_USER.LOCALEID, XT_USER.TIMEZONEID, XT_USER.CUSTOMIZEID, XT_USER.ABOUTME, XT_USER.BDELETE,XT_EMPLOYEE.DEPARTMENTID FROM XT_USER INNER JOIN XT_EMPLOYEE ON XT_USER.USERID=XT_EMPLOYEE.USERID
	                ) A INNER JOIN XT_CUSTOMIZE ON A.CUSTOMIZEID=XT_CUSTOMIZE.CUSTOMIZEID
	              ) B INNER JOIN XT_DEPARTMENT ON B.DEPARTMENTID=XT_DEPARTMENT.DEPARTMENTID
	            ) C INNER JOIN XT_ORG ON C.ORGID=XT_ORG.ORGID
	          ) D INNER JOIN XT_ROLE ON D.ROLEID=XT_ROLE.ROLEID
	        ) E LEFT JOIN XT_COUNTRY ON E.COUNTRYID=XT_COUNTRY.COUNTRYID
	      ) F LEFT JOIN XT_CONTINENT ON F.CONTINENTID=XT_CONTINENT.CONTINENTID
	    ) G LEFT JOIN XT_LOCALE ON G.LOCALEID=XT_LOCALE.LOCALEID
	  ) H LEFT JOIN XT_TIMEZONE ON H.TIMEZONEID=XT_TIMEZONE.TIMEZONEID
	) I LEFT JOIN XT_LOGIN ON I.USERID=XT_LOGIN.LOGINID ORDER BY USERID ASC;


DELETE FROM XT_MENU WHERE PARENTID IS NOT NULL;
DELETE FROM XT_MENU;
DELETE FROM XT_EMPLOYEE;
DELETE FROM XT_USER;
DELETE FROM XT_LOGIN;
DELETE FROM XT_ROLEPRIVILEGE;
DELETE FROM XT_RESOURCE;
DELETE FROM XT_PRIVILEGE;
DELETE FROM XT_ROLE;
DELETE FROM XT_DEPARTMENT;
DELETE FROM XT_ORG;

DELETE FROM XT_CITY;
DELETE FROM XT_STATE;
DELETE FROM XT_COUNTRY;
DELETE FROM XT_CONTINENT;
DELETE FROM XT_LOCALE;
DELETE FROM XT_TIMEZONE;
DELETE FROM XT_CUSTOMIZE;


INSERT INTO XT_CONTINENT(CONTINENTID, NAME, CODE) VALUES(1, 'Africa', 'AF');
INSERT INTO XT_CONTINENT(CONTINENTID, NAME, CODE) VALUES(2, 'Antarctica', 'AN');
INSERT INTO XT_CONTINENT(CONTINENTID, NAME, CODE) VALUES(3, 'Asia', 'AS');
INSERT INTO XT_CONTINENT(CONTINENTID, NAME, CODE) VALUES(4, 'Europe', 'EU');
INSERT INTO XT_CONTINENT(CONTINENTID, NAME, CODE) VALUES(5, 'North America', 'NA');
INSERT INTO XT_CONTINENT(CONTINENTID, NAME, CODE) VALUES(6, 'Oceania', 'OC');
INSERT INTO XT_CONTINENT(CONTINENTID, NAME, CODE) VALUES(7, 'South America', 'SA');

/* ISO 3166-1 , ISO 4217 */
INSERT INTO XT_COUNTRY(COUNTRYID, CONTINENTID, NAME, ISO_CODE_2, ISO_CODE_3, PHONE_CODE, CURRENCY) VALUES(156, 3, '中国', 'CN', 'CHN', '86', 'CNY');
INSERT INTO XT_COUNTRY(COUNTRYID, CONTINENTID, NAME, ISO_CODE_2, ISO_CODE_3, PHONE_CODE, CURRENCY) VALUES(158, 3, '臺灣', 'TW', 'TWN', '886', 'TWD');
INSERT INTO XT_COUNTRY(COUNTRYID, CONTINENTID, NAME, ISO_CODE_2, ISO_CODE_3, PHONE_CODE, CURRENCY) VALUES(250, 4, 'la République française', 'FR', 'FRA', '590', 'EUR');
INSERT INTO XT_COUNTRY(COUNTRYID, CONTINENTID, NAME, ISO_CODE_2, ISO_CODE_3, PHONE_CODE, CURRENCY) VALUES(392, 3, 'にほん', 'JP', 'JPN', '81', 'JPY');
INSERT INTO XT_COUNTRY(COUNTRYID, CONTINENTID, NAME, ISO_CODE_2, ISO_CODE_3, PHONE_CODE, CURRENCY) VALUES(410, 3, '한국', 'KR', 'KOR', '82', 'KRW');
INSERT INTO XT_COUNTRY(COUNTRYID, CONTINENTID, NAME, ISO_CODE_2, ISO_CODE_3, PHONE_CODE, CURRENCY) VALUES(643, 4, 'Российская Федерация', 'RU', 'RUS', '007', 'RUR');
INSERT INTO XT_COUNTRY(COUNTRYID, CONTINENTID, NAME, ISO_CODE_2, ISO_CODE_3, PHONE_CODE, CURRENCY) VALUES(840, 5, 'United States', 'US', 'USA', '1', 'USD');

/* ISO 3166-2  */
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15611, 156, 'Beijing', 'BJ', 11, '京');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15612, 156, 'Tianjin', 'TJ', 12, '津');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15613, 156, 'Hebei',   'HE', 13, '冀');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15614, 156, 'Shanxi',  'SX', 14, '晋');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15615, 156, 'Nei Mongol',  'NM', 15, '蒙');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15621, 156, 'Liaoning',  'LN', 21, '辽');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15622, 156, 'Jilin',  'JL', 22, '吉');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15623, 156, 'Heilongjiang',  'HL', 23, '黑');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15631, 156, 'Shanghai',  'SH', 31, '沪');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15632, 156, 'Jiangsu',  'JS', 32, '苏');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15633, 156, 'Zhejiang',  'ZJ', 33, '浙');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15634, 156, 'Anhui',  'AH', 34, '皖');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15635, 156, 'Fujian',  'FJ', 35, '闽');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15636, 156, 'Jiangxi',  'JX', 36, '赣');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15637, 156, 'Shandong',  'SD', 37, '鲁');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15641, 156, 'Henan',  'HA', 41, '豫');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15642, 156, 'Hubei',  'HB', 42, '鄂');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15643, 156, 'Hunan',  'HN', 43, '湘');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15644, 156, 'Guangdong',  'GD', 44, '粤');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15645, 156, 'Guangxi Zhuang',  'GX', 45, '桂');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15646, 156, 'Hainan',  'HI', 46, '琼');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15650, 156, 'Chongqing',  'CQ', 50, '渝');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15651, 156, 'Sichuan',  'SC', 51, '川');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15652, 156, 'Guizhou',  'GZ', 52, '贵');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15653, 156, 'Yunnan',  'YN', 53, '云');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15654, 156, 'Xizang',  'XZ', 54, '藏');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15661, 156, 'Shaanxi', 'SN', 61, '陕');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15662, 156, 'Gansu', 'GS', 62, '甘');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15663, 156, 'Qinghai',  'QH', 63, '青');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15664, 156, 'Ningxia Hui',  'NX', 64, '宁');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15665, 156, 'Xinjiang Uyghur',  'XJ', 65, '新');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15691, 156, 'Xianggang',  'HK', 91, '港');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15692, 156, 'Aomen',  'MC', 92, '澳');
INSERT INTO XT_STATE(STATEID, COUNTRYID, NAME, SHORTNAME, CODE, SYMBOL) VALUES(15671, 156, 'Taiwan',  'TW', 71, '台');

INSERT INTO XT_CITY(CITYID, STATEID, NAME, CODE, CAPITAL) VALUES(15610, 15611, 'Beijing', '10', 1);
INSERT INTO XT_CITY(CITYID, STATEID, NAME, CODE) VALUES(15622, 15612, 'Tianjin', '22');

-- Microsoft Locale ID Values http://msdn.microsoft.com/en-us/library/ms912047(WinEmbedded.10).aspx
INSERT INTO XT_LOCALE(LOCALEID, NAME, LANGUAGE, COUNTRY) VALUES(1028, '繁體中文(臺灣)', 'zh', 'TW');
INSERT INTO XT_LOCALE(LOCALEID, NAME, LANGUAGE, COUNTRY) VALUES(1033, 'English (United States)', 'en', 'US');
INSERT INTO XT_LOCALE(LOCALEID, NAME, LANGUAGE, COUNTRY) VALUES(2052, '简体中文', 'zh', 'CN');
-- INSERT INTO XT_LOCALE(LOCALEID, NAME, LANGUAGE, COUNTRY) VALUES(5124, '繁體中文(香港)', 'zh', 'HK');

-- https://msdn.microsoft.com/en-US/library/ms912053(v=winembedded.10).aspx
INSERT INTO XT_TIMEZONE(TIMEZONEID, NAME, GMT) VALUES(4, 'Pacific Standard Time(PST)', 'GMT-08:00');
INSERT INTO XT_TIMEZONE(TIMEZONEID, NAME, GMT) VALUES(10, 'Mountain Standard Time(US and Canada)', 'GMT-07:00');
INSERT INTO XT_TIMEZONE(TIMEZONEID, NAME, GMT) VALUES(20, 'Central Standard Time(US and Canada)', 'GMT-06:00');
INSERT INTO XT_TIMEZONE(TIMEZONEID, NAME, GMT) VALUES(85, 'GMT Standard Time(GMT)', 'GMT');
INSERT INTO XT_TIMEZONE(TIMEZONEID, NAME, GMT) VALUES(210, 'China Standard Time(CST)', 'GMT+08:00');
INSERT INTO XT_TIMEZONE(TIMEZONEID, NAME, GMT) VALUES(220, 'Taipei Standard Time(Taipei)', 'GMT+08:00');

/* Table Gender */
/*
INSERT INTO XT_ENUMNAME(ENUMNAMEID, NAME, DESCRIPTION) VALUES(1, 'Gender', 'Gender');
INSERT INTO XT_ENUMVALUE( ENUMNAMEID, VALUE, DESCRIPTION) VALUES( 1, 1, 'Male');
INSERT INTO XT_ENUMVALUE( ENUMNAMEID, VALUE, DESCRIPTION) VALUES( 1, 2, 'Female');

INSERT INTO XT_ENUMNAME(ENUMNAMEID, NAME, DESCRIPTION) VALUES(2, 'YesNo', 'YesNo');
INSERT INTO XT_ENUMVALUE( ENUMNAMEID, VALUE, DESCRIPTION) VALUES( 2, 1, 'Yes');
INSERT INTO XT_ENUMVALUE( ENUMNAMEID, VALUE, DESCRIPTION) VALUES( 2, 2, 'No');
*/

/* Table */
INSERT INTO XT_ORG(ORGID, NAME) VALUES(1, 'ORG');

INSERT INTO XT_DEPARTMENT(DEPARTMENTID, ORGID, NAME) VALUES(1, 1, 'DEPARTMENT');

INSERT INTO XT_ROLE(ROLEID, NAME, DESCRIPTION) VALUES(1, '系统管理员', 'ADMIN');

INSERT INTO XT_CUSTOMIZE(CUSTOMIZEID, DATEFORMAT, TIMEFORMAT, DATETIMEFORMAT, PAGESIZE, STYLE) VALUES(1, 'yyyy-MM-dd', 'HH:mm:ss', 'yyyy-MM-dd HH:mm:ss', 15, 'orange');

INSERT INTO XT_USER(USERID, `TYPE`, NAME, NICKNAME, GENDER, ROLEID, CUSTOMIZEID ) VALUES(1, 'E', '管理员', 'superman', 'Male', 1, 1);

INSERT INTO XT_EMPLOYEE(USERID, DEPARTMENTID) VALUES(1, 1);

INSERT INTO XT_LOGIN(LOGINID, LOGINNAME, PASSWORD, COOKIE, `LOCK`) VALUE(1, 'admin', 'ISMvKXpXpadDiUoOSoAfww==', '', 0);
INSERT INTO XT_LOGINSTATUS(LOGINSTATUSID) VALUES(1);

